:root{
  --bg:#0f1115;
  --panel:#151a22;
  --elev:#1a2130;
  --text:#e8ecf3;
  --muted:#9aa6bd;
  --accent:#87b4ff;
  --danger:#ff6b6b;
  --border:#2a3243;
  --radius:14px;
  --shadow:0 10px 30px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font:16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial;
  -webkit-tap-highlight-color: transparent;
}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:20;
  display:flex; align-items:center; justify-content:space-between; gap:10px;
  padding:12px 14px; background:rgba(12,16,22,.9); backdrop-filter: blur(10px);
  border-bottom:1px solid var(--border);
}
.brand{display:flex; align-items:center; gap:10px}
.logo{filter:drop-shadow(0 2px 6px rgba(135,180,255,.5))}
.title{font-weight:700}

.icon-btn{
  appearance:none; border:1px solid var(--border); color:var(--text);
  background:var(--elev); border-radius:12px; padding:10px 12px; font-size:18px;
}
.seg{
  appearance:none; border:1px solid var(--border); color:var(--text);
  background:linear-gradient(180deg,#23324a,#1a2436); border-radius:12px; padding:10px 12px;
  font-size:14px;
}

/* Sheet (bottom action menu) */
.sheet{position:fixed; inset:0; display:none}
.sheet.show{display:block}
.sheet-backdrop{position:absolute; inset:0; background:rgba(0,0,0,.45)}
.sheet-body{
  position:absolute; left:0; right:0; bottom:0;
  background:var(--panel); border-top-left-radius:20px; border-top-right-radius:20px;
  border:1px solid var(--border); box-shadow:var(--shadow);
  padding:10px 14px 14px; max-height:80dvh; overflow:auto;
}
.sheet-grabber{width:54px; height:5px; border-radius:999px; background:#2c3546; margin:8px auto 10px}
.sheet h2{margin:4px 0 12px 2px; font-size:18px}
.sheet-grid{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:12px}
.sheet-btn{
  background:var(--elev); border:1px solid var(--border); border-radius:12px; padding:12px;
  color:var(--text); text-align:center;
}
.sheet-btn.danger{background:#3b2326; border-color:#5a2f35; color:#ffd9dd}
.close-btn{
  width:100%; margin-top:8px; padding:12px; border-radius:12px; border:1px solid var(--border);
  background:#0f1420; color:var(--text);
}
.field{display:grid; gap:6px; margin:8px 0}
.field input{padding:10px 12px; border-radius:10px; border:1px solid var(--border); background:#0f1420; color:var(--text)}

/* Comic Strip view */
.comic-head{padding:8px 14px 0}
.hint{margin:0 0 8px; color:var(--muted); font-size:13px}
.scenes{display:grid; gap:14px; padding:6px 8px 80px}
.scene{
  background:var(--panel); border:1px solid var(--border); border-radius:14px; overflow:hidden;
  box-shadow:var(--shadow);
}
.scene-head{
  display:flex; align-items:center; gap:10px; padding:8px 12px; border-bottom:1px solid var(--border);
}
.scene-title{
  font-weight:700; font-size:15px; flex:1; min-width:0;
}
.scene-actions{display:flex; gap:8px}
.small-btn{
  border:1px solid var(--border); background:#0f1420; color:var(--text); border-radius:10px; padding:8px 10px;
  font-size:13px;
}

/* Horizontal strip of shots */
.strip{
  display:flex; align-items:stretch; gap:10px; overflow-x:auto; overscroll-behavior-x:contain;
  padding:12px;
}
.shot{
  flex:0 0 240px; max-width:240px;
  border:1px solid var(--border); border-radius:12px; background:var(--elev);
  display:grid; grid-template-rows: 1fr auto; min-height:140px; overflow:hidden; position:relative;
}
.thumb{display:grid; place-items:center; background:#0b0e13; aspect-ratio:16/9; overflow:hidden}
.thumb img,.thumb video{width:100%; height:100%; object-fit:cover}
.meta{
  border-top:1px solid var(--border); padding:8px; font-size:12px; color:var(--muted);
}
.meta strong{color:var(--text)}
.badge{position:absolute; top:8px; left:8px; background:#0c1625; border:1px solid #2a3c58; color:#cfe0ff; font-size:11px; padding:3px 6px; border-radius:999px}
.overlay-info{ /* toggled when tapping a shot */
  position:absolute; inset:0; display:none; align-items:flex-end; justify-content:center;
  background:linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.65));
  color:#ecf3ff; text-align:center; padding:12px; font-weight:700;
}
.shot.show-info .overlay-info{display:flex}

/* Empty/add box */
.shot.empty .thumb{background: repeating-linear-gradient(45deg,#0c1220 0 10px,#0e1426 10px 20px)}
.add-box{
  display:grid; place-items:center; color:#b9c7e6; font-weight:700; letter-spacing:.25px;
}
.add-box .plus{font-size:34px; line-height:1}

/* Board (classic) */
.board{padding:12px; display:grid; gap:12px}
.dropzone{
  border:2px dashed #3b4866; border-radius:14px; display:grid; place-items:center; text-align:center;
  padding:24px; color:var(--muted); background:#0e1420; outline:none;
}
.dropzone:focus{box-shadow:0 0 0 3px rgba(135,180,255,.25)}
.dropzone.dragover{background:#101a2e; color:#fff; border-color:#49639a}
.dz-inner strong{display:block; margin-bottom:4px}
.board-list{list-style:none; margin:0; padding:0; display:grid; gap:10px}

/* Utilities */
.hidden{display:none !important}
.spacer-80{height:80px}

@media (max-width: 480px){
  .shot{flex-basis: 200px; max-width:200px}
}
